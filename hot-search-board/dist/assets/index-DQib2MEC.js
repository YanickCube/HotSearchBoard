import{c6 as e,ac as a,r as t,y as s,aO as l,B as n,C as r,_ as o,T as i,D as c,X as d,Y as u,Z as p,av as h,G as v,c3 as m}from"./vendor-DqeBO3Ho.js";import{E as f,i as g}from"./element-plus-Cb7uLFoT.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver((e=>{for(const t of e)if("childList"===t.type)for(const e of t.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&a(e)})).observe(document,{childList:!0,subtree:!0})}function a(e){if(e.ep)return;e.ep=!0;const a=function(e){const a={};return e.integrity&&(a.integrity=e.integrity),e.referrerPolicy&&(a.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?a.credentials="include":"anonymous"===e.crossOrigin?a.credentials="omit":a.credentials="same-origin",a}(e);fetch(e.href,a)}}();function y(e){return e>=1e4?`${(e/1e4).toFixed(1)}万`:String(e)}const _={class:"hot-search-container"},k={class:"hot-search-header"},w={class:"header-content"},b={class:"header-actions"},x={class:"hot-search-date"},A={class:"hot-search-content"},I={class:"hot-search-list-container"},C={class:"list-header"},L={key:0,class:"hot-search-loading"},j={key:1,class:"hot-search-error"},$={key:2,class:"hot-search-list"},q=["onClick"],z={class:"hot-search-title"},M={class:"hot-search-hot"},O={class:"ai-content-container"},T={key:0,class:"ai-content-placeholder"},B={key:1,class:"ai-content"},P={class:"ai-content-header"},S={key:0,class:"ai-loading"},D={key:1,class:"ai-generated-content"},E={class:"ai-image-container"},H={class:"image-placeholder"},N={class:"ai-text-header"},Q=["innerHTML"],R=((e,a)=>{const t=e.__vccOpts||e;for(const[s,l]of a)t[s]=l;return t})({__name:"HotSearchBoard",setup(m){const g=a([]),R=t(!1),F=t(""),G=async()=>{R.value=!0,F.value="";try{const a=await async function(){try{const a=await e.get("https://apis.tianapi.com/douyinhot/index",{params:{key:"65c484075e7293953d062ce225926e99"}});if(200===a.data.code)return a.data.result.list.map(((e,a)=>({id:a+1,title:e.word,hot:y(e.hotindex),rank:a+1,label:e.label})));throw console.error("获取热搜数据失败:",a.data.msg),new Error(`获取热搜数据失败: ${a.data.msg}`)}catch(a){throw console.error("获取热搜数据出错:",a),a}}();g.splice(0,g.length,...a)}catch(a){console.error("获取热搜数据失败:",a),F.value=a.message||"获取热搜数据失败，请稍后重试",f({title:"错误",message:F.value,type:"error",duration:5e3})}finally{R.value=!1}};s((()=>{G()}));const K=t(null),V=t(""),X=t(""),Y=t(!1),Z=t(""),J=async a=>{Y.value=!0,Z.value="";try{const t=await async function(a){try{const t=await e.post("https://api.siliconflow.cn/v1/chat/completions",{model:"Qwen/QwQ-32B",messages:[{role:"user",content:`请对以下热搜话题进行分析并提供相关观点：${a}。请提供300字左右的分析，语言要幽默，观点要犀利。`}],stream:!1,max_tokens:1024,temperature:.7,top_p:.7,top_k:50,frequency_penalty:.5,n:1,response_format:{type:"text"}},{headers:{Authorization:"Bearer sk-xjbjsnfsviyvspdjfrbqvgynegbkngmpuancfadmiobqqbgb","Content-Type":"application/json"}});let s="";return t.data.choices&&t.data.choices.length>0&&(s=t.data.choices.map((e=>e.message.content)).join("\n\n")),{text:s,image:`https://picsum.photos/600/400?random=${Math.floor(100*Math.random())}`}}catch(t){throw console.error("生成AI内容出错:",t),t}}(a);V.value=t.text.trim(),X.value=t.image}catch(t){console.error("生成AI内容失败:",t),Z.value=t.message||"生成AI内容失败，请稍后重试",f({title:"错误",message:Z.value,type:"error",duration:5e3}),V.value=`无法获取关于"${a}"的AI分析内容，请稍后重试。`,X.value="https://picsum.photos/600/400?random=0"}finally{Y.value=!1}},U=()=>{G(),f({title:"提示",message:"正在刷新热搜数据...",type:"info",duration:2e3})};return(e,a)=>{const t=l("TrendCharts"),s=l("el-icon"),m=l("Calendar"),f=l("el-button"),y=l("List"),Z=l("el-skeleton"),W=l("el-empty"),ee=l("View"),ae=l("el-scrollbar"),te=l("Connection"),se=l("el-tag"),le=l("el-divider"),ne=l("Picture"),re=l("el-image"),oe=l("ChatLineRound"),ie=l("el-card");return r(),n("div",_,[o(ie,{class:"hot-search-card"},{default:i((()=>[c("div",k,[c("div",w,[o(s,{class:"header-icon"},{default:i((()=>[o(t)])),_:1}),a[0]||(a[0]=c("h1",null,"今日热搜榜",-1))]),c("div",b,[c("p",x,[o(s,null,{default:i((()=>[o(m)])),_:1}),d(" "+u((new Date).toLocaleDateString()),1)]),o(f,{type:"primary",size:"small",icon:e.Refresh,onClick:U,loading:R.value},{default:i((()=>a[1]||(a[1]=[d("刷新")]))),_:1},8,["icon","loading"])])]),c("div",A,[c("div",I,[c("div",C,[o(s,null,{default:i((()=>[o(y)])),_:1}),a[2]||(a[2]=c("span",null,"热搜话题",-1))]),o(ae,{height:"550px"},{default:i((()=>[R.value&&0===g.length?(r(),n("div",L,[o(Z,{rows:10,animated:""}),a[3]||(a[3]=c("p",{class:"loading-text"},"正在获取热搜数据...",-1))])):F.value&&0===g.length?(r(),n("div",j,[o(W,{description:"获取热搜数据失败"},{description:i((()=>[c("p",null,u(F.value),1)])),default:i((()=>[o(f,{type:"primary",onClick:G},{default:i((()=>a[4]||(a[4]=[d("重试")]))),_:1})])),_:1})])):(r(),n("div",$,[(r(!0),n(p,null,h(g,(e=>(r(),n("div",{key:e.id,class:v(["hot-search-item",{active:K.value&&K.value.id===e.id}]),onClick:a=>(e=>{K.value=e,J(e.title)})(e)},[c("div",{class:v(["hot-search-rank",`rank-${e.rank<=3?e.rank:"normal"}`])},u(e.rank),3),c("div",z,u(e.title),1),c("div",M,[o(s,null,{default:i((()=>[o(ee)])),_:1}),d(" "+u(e.hot),1)])],10,q)))),128))]))])),_:1})]),c("div",O,[K.value?(r(),n("div",B,[c("div",P,[c("h2",null,[o(se,{size:"large",effect:"dark",class:"topic-tag"},{default:i((()=>a[6]||(a[6]=[d("热点话题")]))),_:1}),d(" "+u(K.value.title),1)]),o(se,{type:"danger",size:"small",class:"rank-tag"},{default:i((()=>[d("热度排名 #"+u(K.value.rank),1)])),_:1})]),o(le,{"content-position":"center"},{default:i((()=>a[7]||(a[7]=[d("AI分析内容")]))),_:1}),Y.value?(r(),n("div",S,[o(Z,{rows:6,animated:""}),a[8]||(a[8]=c("p",null,"AI正在生成内容，请稍候...",-1))])):(r(),n("div",D,[c("div",E,[o(re,{src:X.value,alt:"AI生成图片",class:"ai-image","preview-src-list":[X.value],fit:"cover",loading:"lazy"},{placeholder:i((()=>[c("div",H,[o(s,null,{default:i((()=>[o(ne)])),_:1})])])),_:1},8,["src","preview-src-list"])]),o(ie,{class:"ai-text-card",shadow:"hover"},{header:i((()=>[c("div",N,[o(s,null,{default:i((()=>[o(oe)])),_:1}),a[9]||(a[9]=c("span",null,"AI分析观点",-1))])])),default:i((()=>[c("div",{class:"ai-text",innerHTML:V.value.replace(/\n/g,"<br>"),style:{"white-space":"pre-line"}},null,8,Q)])),_:1})]))])):(r(),n("div",T,[o(W,{description:"请从左侧选择一条热搜"},{image:i((()=>[o(s,{class:"empty-icon"},{default:i((()=>[o(te)])),_:1})])),description:i((()=>a[5]||(a[5]=[c("p",null,"请从左侧选择一条热搜，AI将为您生成相关图文内容",-1)]))),_:1})]))])])])),_:1})])}}},[["__scopeId","data-v-08432a2a"]]),F={class:"app-container"},G=m({__name:"App",setup:e=>(e,a)=>(r(),n("div",F,[o(R)]))});G.use(g),G.mount("#app");
